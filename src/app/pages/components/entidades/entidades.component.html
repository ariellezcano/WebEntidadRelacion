<h3 class="titulo-entidades">Entidades</h3>

<!-- Agregar nueva entidad -->
<div class="nueva-entidad">
  <input type="text" [(ngModel)]="nuevaEntidad.nombre" placeholder="Nombre de la entidad">
  <button (click)="agregarEntidad()">Agregar Entidad</button>
</div>

<!-- Lista de entidades y sus atributos -->
<div *ngFor="let entidad of entidades" class="entidad-card">
  <h4 class="nombre-entidad">
    <em><b><u> {{ entidad.nombre }}</u></b></em>
    <!-- Botón para eliminar ENTIDAD -->
    <button class="btn-eliminar-entidad" (click)="eliminarEntidad(entidad)">❌</button>
  </h4>

  <ul class="atributos-lista">
    <li *ngFor="let attr of entidad.atributos">
      {{ attr.nombre }} ({{ attr.tipo }})
      <span *ngIf="attr.clavePrimaria" class="tag pk">PK</span>
      <span *ngIf="attr.claveForanea" class="tag fk">FK</span>
      <span *ngIf="!attr.nulo" class="tag not-null">NOT NULL</span>

      <!-- Botón para eliminar ATRIBUTO -->
      <button class="btn-eliminar" (click)="eliminarAtributo(entidad, attr)">❌</button>
    </li>
  </ul>

  <!-- Agregar atributo a esta entidad -->
  <div class="nuevo-atributo">
    <input type="text" [(ngModel)]="nuevoAtributo.nombre" placeholder="Nombre atributo">
    <select [(ngModel)]="nuevoAtributo.tipo">
      <option *ngFor="let tipo of tiposDatos" [value]="tipo">{{ tipo }}</option>
    </select>
    
    
    <!-- <label><input type="checkbox" [(ngModel)]="nuevoAtributo.clavePrimaria" (change)="1"> PK</label>
    <label><input type="checkbox" [(ngModel)]="nuevoAtributo.claveForanea" (change)="2"> FK</label> -->

<label>
  <input 
    type="checkbox" 
    [(ngModel)]="nuevoAtributo.clavePrimaria" 
    (change)="chequeo(1)" 
  /> 
  PK
</label>

<label>
  <input 
    type="checkbox" 
    [(ngModel)]="nuevoAtributo.claveForanea" 
    (change)="chequeo(2)" 
  /> 
  FK
</label>

    <label><input type="checkbox" [(ngModel)]="nuevoAtributo.nulo"> Nulo</label>
    <button (click)="agregarAtributo(entidad)">Agregar Atributo</button>
  </div>
</div>
